<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yenglihs Translator</title>
    <!--
        Styles for overall page layout, typography, and component appearance
    -->
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f0f4f8, #d9e2ec);
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            width: 90%;
            max-width: 900px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background-color: #0077cc;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2rem;
        }
        .description {
            background: #e9f5ff;
            padding: 20px;
            border-left: 5px solid #0077cc;
        }
        .description h2 {
            margin-top: 0;
        }
        .description ol {
            margin: 10px 0;
            padding-left: 20px;
        }
        .tabs {
            display: flex;
            border-bottom: 2px solid #e0e0e0;
        }
        .tab {
            flex: 1;
            text-align: center;
            padding: 12px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .tab.active {
            background: #e9f5ff;
            border-bottom: 4px solid #0077cc;
            font-weight: bold;
        }
        .panel {
            display: none;
            padding: 20px;
        }
        .panel.active {
            display: block;
        }
        .translator textarea {
            width: 100%;
            height: 120px;
            padding: 12px;
            margin-bottom: 12px;
            border: 1px solid #ccc;
            border-radius: 6px;
            resize: vertical;
        }
        .controls {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }
        .controls button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }
        .btn-primary {
            background: #0077cc;
            color: #fff;
        }
        .btn-primary:hover {
            background: #005fa3;
        }
        .btn-success {
            background: #28a745;
            color: #fff;
        }
        .btn-success:hover {
            background: #218838;
        }
        .output {
            padding: 16px;
            background: #f7fafc;
            border: 1px solid #ddd;
            border-radius: 6px;
            white-space: pre-wrap;
            min-height: 60px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <h1>Yenglihs Translator</h1>
        </div>

        <!-- Description of Yenglihs Rules -->
        <div class="description">
            <h2>About Yenglihs</h2>
            <p>
                Yenglihs modifies words with playful rules for entertainment. Input English (or any Latin-based) text, and watch it transform!
            </p>
            <h2>Yenglihs Transformation Rules</h2>
            <ol>
                <li>Replace first character with <code>y</code>, unless it already starts with <code>y</code>.</li>
                <li>If word starts with <code>y</code>, prefix with <code>la-</code>.</li>
                <li>Swap the final two letters of the word.</li>
                <li>For 2-letter words, swap the letters and append <code>l</code> if it ends in a vowel.</li>
                <li>For 1-letter vowels, append <code>l</code>.</li>
                <li>Append <code>l</code> to words ending in a vowel.</li>
                <li>For words &ge;3 letters, append original first letter; if both it and the last letter are same type (vowel/consonant), insert <code>y</code> between.</li>
            </ol>
            <h2>Reversing Yenglihs</h2>
            <ol>
                <li>Remove leading <code>y</code> or <code>la-</code> prefix.</li>
                <li>Swap last two letters back.</li>
                <li>Remove appended first letter (and any inserted <code>y</code>).</li>
                <li>Undo vowel <code>l</code> additions for 1- or 2-letter words.</li>
            </ol>
        </div>

        <!-- Tab Navigation -->
        <div class="tabs">
            <div class="tab active" data-target="toYenglihsPanel">To Yenglihs</div>
            <div class="tab" data-target="toEnglishPanel">To English</div>
        </div>

        <!-- Transformation Panel -->
        <div id="toYenglihsPanel" class="panel active">
            <div class="translator">
                <!-- User input for Yenglihs conversion -->
                <textarea id="yenglihsInput" placeholder="Enter text to transform..."></textarea>
                <div class="controls">
                    <button class="btn-primary" onclick="convertToYenglihs()">Transform</button>
                    <button class="btn-success" onclick="copyText('yenglihsOutput')">Copy</button>
                </div>
                <!-- Display transformed text -->
                <div id="yenglihsOutput" class="output"></div>
            </div>
        </div>

        <!-- Reverse Panel -->
        <div id="toEnglishPanel" class="panel">
            <div class="translator">
                <!-- User input for reversing Yenglihs -->
                <textarea id="englishInput" placeholder="Enter Yenglihs text to revert..."></textarea>
                <div class="controls">
                    <button class="btn-primary" onclick="convertFromYenglihs()">Revert</button>
                    <button class="btn-success" onclick="copyText('englishOutput')">Copy</button>
                </div>
                <!-- Display reverted text -->
                <div id="englishOutput" class="output"></div>
            </div>
        </div>
    </div>

    <!-- Script Section: Logic for tabs and transformations -->
    <script>
        /**
         * Toggle between "To Yenglihs" and "To English" panels
         */
        document.querySelectorAll('.tab').forEach(tabElement => {
            tabElement.addEventListener('click', () => {
                // Deactivate all tabs and panels
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));

                // Activate clicked tab and corresponding panel
                tabElement.classList.add('active');
                document.getElementById(tabElement.dataset.target).classList.add('active');
            });
        });

        /**
         * Check if a character is an English letter
         * @param {string} char - Single character to test
         * @returns {boolean}
         */
        function isAlphabeticalLetter(char) {
            return /[a-zA-Z]/.test(char);
        }

        /**
         * Convert entire input text to Yenglihs
         */
        function convertToYenglihs() {
            const inputText = document.getElementById('yenglihsInput').value;
            const wordsArray = inputText.split(/\s+/);
            const transformedWords = wordsArray.map(transformToYenglihs);
            document.getElementById('yenglihsOutput').textContent = transformedWords.join(' ');
        }

        /**
         * Apply Yenglihs transformation rules to a single word
         * @param {string} word
         * @returns {string}
         */
        function transformToYenglihs(word) {
            // If no alphabetical characters, return unchanged
            if (![...word].some(isAlphabeticalLetter)) return word;

            // Handle single-character words
            if (word.length === 1) {
                return /[aeiou]/i.test(word) ? word + 'l' : word;
            }

            // Handle two-character words
            if (word.length === 2) {
                const swapped = word[1] + word[0];
                return /[aeiou]/i.test(swapped[1]) ? swapped + 'l' : swapped;
            }

            // Main transformation for words with 3+ letters
            // Step 1: Prefix with 'y' or 'la'
            let transformed = word[0].toLowerCase() !== 'y'
                ? 'y' + word.slice(1)
                : 'la' + word;

            // Step 2: Swap the last two letters
            transformed = transformed.slice(0, -2)
                + transformed.slice(-1)
                + transformed.slice(-2, -1);

            // Step 3: Append 'l' if ending in a vowel-like character
            if (/[aeiouy]/i.test(transformed.slice(-1))) {
                transformed += 'l';
            }

            // Step 4: Append original first letter, with optional 'y' separator
            const originalFirst = word[0].toLowerCase();
            const sameType = /[aeiou]/i.test(originalFirst) === /[aeiou]/i.test(transformed.slice(-1));
            transformed += sameType ? 'y' + originalFirst : originalFirst;

            return transformed;
        }

        /**
         * Reverse Yenglihs text back to original English
         */
        function convertFromYenglihs() {
            const inputText = document.getElementById('englishInput').value;
            const wordsArray = inputText.split(/\s+/);
            const reversedWords = wordsArray.map(reverseFromYenglihs);
            document.getElementById('englishOutput').textContent = reversedWords.join(' ');
        }

        /**
         * Reverse transformation for a single Yenglihs word
         * @param {string} word
         * @returns {string}
         */
        function reverseFromYenglihs(word) {
            // If no alphabetical characters, return unchanged
            if (![...word].some(isAlphabeticalLetter)) return word;

            // Short-circuit for very short words
            if (word.length === 1) return word;
            if (word.length === 2) {
                const core = word.endsWith('l') ? word.slice(0, -1) : word;
                return core[1] + core[0];
            }

            // Extract last original first-letter for reattachment
            const lastChar = word.slice(-1);
            let core = word.slice(0, -1);

            // Remove inserted 'y' if it preceded a vowel suffix
            if (core.endsWith('y') && /[aeiou]/i.test(lastChar)) {
                core = core.slice(0, -1);
            }

            // Remove the vowel-ending 'l' marker
            if (core.endsWith('l') && /[aeiouy]/i.test(core.slice(-1))) {
                core = core.slice(0, -1);
            }

            // Swap final two letters back
            core = core.slice(0, -2) + core.slice(-1) + core.slice(-2, -1);

            // Remove the 'la' prefix or leading 'y'
            if (core.startsWith('la')) {
                core = core.slice(2);
            } else if (core.startsWith('y')) {
                core = core.slice(1);
            }

            // Prepend the original first letter
            return lastChar + core;
        }

        /**
         * Copy text content of an element to clipboard
         * @param {string} elementId
         */
        function copyText(elementId) {
            const textContent = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(textContent);
        }
    </script>
</body>
</html>
